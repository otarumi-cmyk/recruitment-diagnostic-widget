<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>人気300企業 転職可能性診断</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --surface: #1f2937;
      --border: #1f2a44;
      --primary: #10b981;
      --secondary: #22d3ee;
      --accent: #f59e0b;
      --danger: #f97316;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --radius: 16px;
      --font: 'Inter', 'Noto Sans JP', system-ui, -apple-system, sans-serif;
      --shadow: 0 18px 48px rgba(0,0,0,0.22);
      --shadow-soft: 0 8px 22px rgba(0,0,0,0.16);
      --glow: 0 0 36px rgba(16,185,129,0.25);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: var(--font);
      background: radial-gradient(circle at 20% 20%, rgba(34,211,238,0.12), transparent 25%),
                  radial-gradient(circle at 80% 0%, rgba(16,185,129,0.12), transparent 20%),
                  var(--bg);
      color: var(--text);
      padding: 24px;
    }
    .shell {
      max-width: 1040px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }
    .hero {
      padding: 24px 28px;
      background: linear-gradient(135deg, rgba(16,185,129,0.12), rgba(34,211,238,0.08));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(6px);
    }
    .hero h1 { margin: 0 0 8px; font-size: 24px; letter-spacing: 0.01em; }
    .hero p { margin: 4px 0; color: var(--muted); }
    .cta-row { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 16px; align-items: center; }
    .btn {
      border: none;
      border-radius: 12px;
      padding: 12px 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.15s ease;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #0b1120;
      box-shadow: var(--glow);
    }
    .btn-primary:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .btn-secondary {
      background: rgba(255,255,255,0.06);
      color: var(--text);
      border: 1px solid var(--border);
    }
    .panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      padding: 20px;
    }
    .flex {
      display: grid;
      grid-template-columns: 2fr 1.1fr;
      gap: 16px;
    }
    .question-card {
      padding: 16px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: rgba(255,255,255,0.02);
      margin-bottom: 12px;
    }
    .question-title { margin: 0 0 8px; font-weight: 700; }
    .options { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 8px; }
    .opt {
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: rgba(255,255,255,0.03);
      cursor: pointer;
      transition: all 0.15s ease;
      color: var(--text);
    }
    .opt:hover { border-color: var(--primary); transform: translateY(-1px); }
    .opt.active { border-color: var(--primary); background: rgba(16,185,129,0.12); box-shadow: var(--glow); color: #eafff6; }
    .nav { display: flex; justify-content: space-between; gap: 10px; margin-top: 12px; }
    .progress-wrap { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
    .progress { flex: 1; height: 10px; background: rgba(255,255,255,0.05); border-radius: 999px; overflow: hidden; }
    .progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), var(--secondary)); transition: width 0.2s ease; }
    .progress-text { font-size: 13px; color: var(--muted); min-width: 110px; text-align: right; }
    .error { color: #fca5a5; font-size: 13px; margin-top: 6px; }
    .meter {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      align-items: center;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.02);
    }
    .meter-bar {
      position: relative;
      width: 100%;
      height: 12px;
      background: rgba(255,255,255,0.05);
      border-radius: 999px;
      overflow: hidden;
    }
    .meter-fill { position: absolute; inset: 0; width: 20%; border-radius: 999px; }
    .tag { padding: 4px 8px; border-radius: 999px; font-size: 12px; font-weight: 700; border: 1px solid var(--border); }
    .result-list { display: flex; flex-direction: column; gap: 10px; }
    .muted { color: var(--muted); font-size: 14px; }
    .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap: 10px; margin-top: 8px; }
    .mini-card { padding: 12px; border-radius: 12px; border: 1px solid var(--border); background: rgba(255,255,255,0.03); }
    .pill { display: inline-flex; gap: 6px; align-items: center; padding: 6px 10px; border-radius: 999px; background: rgba(255,255,255,0.06); border: 1px solid var(--border); font-size: 12px; color: var(--text); }
    @media (max-width: 960px) { .flex { grid-template-columns: 1fr; } }
    @media (max-width: 640px) {
      body { padding: 16px; }
      .hero { padding: 18px; }
      .options { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="hero">
      <h1>人気300企業 転職可能性診断</h1>
      <p>20問で市場価値をスコア化し、300社の合格可能性を1〜6%で可視化。</p>
      <div class="cta-row">
        <button class="btn btn-primary" id="start">診断を始める</button>
        <button class="btn btn-secondary" id="skip">結果サンプルを見る</button>
        <span class="muted">レスポンシブ対応・全設問カード型UI</span>
      </div>
    </div>

    <div class="panel flex">
      <div>
        <div class="progress-wrap">
          <div class="progress"><div class="progress-bar" id="progress-bar"></div></div>
          <div class="progress-text" id="progress-text">0/20 (0%)</div>
        </div>
        <div id="form-area"></div>
      </div>
      <div>
        <h3 style="margin:0 0 6px;">合格可能性メーター（例）</h3>
        <p class="muted" style="margin:0 0 10px;">6%以上でGREEN、それ未満は黄/橙/赤にグラデーション。</p>
        <div class="result-list" id="result-list"></div>
        <div class="cards">
          <div class="mini-card">
            <div class="pill">レンジ: 1〜6%</div>
            <div class="muted" style="margin-top:6px;">95%がこの範囲に収まる設計</div>
          </div>
          <div class="mini-card">
            <div class="pill">g0=0 / s=4</div>
            <div class="muted" style="margin-top:6px;">シグモイドで平滑化し、上限/下限をクリップ</div>
          </div>
          <div class="mini-card">
            <div class="pill">k_diff</div>
            <div class="muted" style="margin-top:6px;">難易度係数で実力主義の倍率を反映</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    const formArea = document.getElementById('form-area');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    const resultList = document.getElementById('result-list');
    const startBtn = document.getElementById('start');
    const skipBtn = document.getElementById('skip');

    const questions = [
      { id: 'Q1', title: '現在の職務レベルは？', type: 'single', options: ['指示された作業が中心', '一人前の担当者', 'チームの中心メンバー', 'リーダー／主任', 'マネージャー', '事業責任者クラス'] },
      { id: 'Q2', title: '担当業務の範囲は？', type: 'single', options: ['単一業務のみ', '複数業務を担当', '部門横断PJに参加', '事業全体に関わる仕事'] },
      { id: 'Q3', title: '過去1年の成果レベルは？', type: 'single', options: ['成果なし・定性的', '一部目標達成', '目標達成', 'KPI大幅達成', '事業成果が大きい'] },
      { id: 'Q4', title: '成果を数字で語れる度合いは？', type: 'single', options: ['数字で語れない', '一部のみ数字で説明', '明確な数字で説明できる'] },
      { id: 'Q5', title: '専門スキルの市場価値は？', type: 'single', options: ['一般事務', '営業', 'マーケ/企画', 'IT/エンジニア', 'AI/データ/高度専門職'] },
      { id: 'Q6', title: '業務上の裁量の大きさは？', type: 'single', options: ['指示された仕事中心', '一部裁量あり', '自ら意思決定', '戦略レベルの意思決定'] },
      { id: 'Q7', title: '現在の年収は？', type: 'single', options: ['〜300万円', '300〜400万円', '400〜600万円', '600〜800万円', '800〜1000万円', '1000万円以上'] },
      { id: 'Q8', title: '現在の役職は？', type: 'single', options: ['一般職', 'リーダー', 'マネージャー', '部長クラス', '事業責任者'] },
      { id: 'Q9', title: '在籍年数の安定性は？', type: 'single', options: ['1年未満が多い', '2〜3年が多い', '3〜5年が多い', '5年以上が多い'] },
      { id: 'Q10', title: '論理的思考力は？', type: 'single', options: ['弱い', '普通', '強い', '得意・仕事で活かせる'] },
      { id: 'Q11', title: 'コミュニケーション／調整能力は？', type: 'single', options: ['苦手', '普通', '得意', '社内外の折衝を任される'] },
      { id: 'Q12', title: 'AI／デジタルスキルは？', type: 'single', options: ['ほぼ使えない', '一般ツールを使える', '業務改善で使える', 'AI活用で成果を出している'] },
      { id: 'Q13', title: '志望業界の経験は？', type: 'single', options: ['未経験', '1〜2年', '3〜5年', '5年以上'] },
      { id: 'Q14', title: '志望職種の経験は？', type: 'single', options: ['未経験', '一部経験', '実務経験十分', '専門家レベル'] },
      { id: 'Q15', title: '求めるスキルとの一致度は？', type: 'single', options: ['ほぼ一致しない', '一部一致', 'かなり一致', 'ほぼ一致'] },
      { id: 'Q16', title: '最終学歴は？', type: 'single', options: ['その他', '日東駒専/地方国公立', 'MARCH/関関同立', '早慶', '旧帝大/海外トップ大'] },
      { id: 'Q17', title: '資格の保有状況は？', type: 'single', options: ['なし', '一般資格', '国家資格・専門資格'] },
      { id: 'Q18', title: '転職理由は前向きに説明できますか？', type: 'single', options: ['説明できない', '一部説明できる', 'ロジカルに説明できる'] },
      { id: 'Q19', title: '継続力・安定性は？', type: 'single', options: ['続かないことが多い', '普通', '継続力が強み'] },
      { id: 'Q20', title: 'リーダーシップ経験は？', type: 'single', options: ['経験なし', '小規模リーダー', 'プロジェクト以上を率いた経験'] },
    ];

    let step = 0;
    const answers = {};

    const sampleCompanies = [
      { name: 'ニトリ', prob: 5.9 },
      { name: 'ZOZO', prob: 5.4 },
      { name: 'JR東日本', prob: 4.5 },
      { name: '楽天', prob: 3.0 },
      { name: 'Google', prob: 1.3 },
    ];

    function colorByProb(p) {
      if (p >= 6) return ['#22c55e', 'GREEN'];
      if (p >= 4) return ['#eab308', 'YELLOW'];
      if (p >= 2) return ['#f97316', 'ORANGE'];
      return ['#ef4444', 'RED'];
    }

    function renderResults(companies = sampleCompanies) {
      resultList.innerHTML = companies.map((c, i) => {
        const [color, label] = colorByProb(c.prob);
        const pct = Math.min(c.prob / 6, 1) * 100;
        return `
          <div class="meter">
            <div>
              <div style="font-weight:700;">${i + 1}. ${c.name}</div>
              <div class="meter-bar">
                <div class="meter-fill" style="width:${pct}%; background: linear-gradient(90deg, ${color}, ${color}80);"></div>
              </div>
            </div>
            <div style="text-align:right;">
              <div style="font-weight:800; font-size:16px;">${c.prob.toFixed(1)}%</div>
              <div class="tag" style="color:${color}; border-color:${color}55;">${label}</div>
            </div>
          </div>
        `;
      }).join('');
    }

    function setProgress() {
      const pct = Math.round((step / questions.length) * 100);
      progressBar.style.width = `${pct}%`;
      progressText.textContent = `${step}/${questions.length} (${pct}%)`;
    }

    function renderQuestion() {
      setProgress();
      const q = questions[step];
      if (!q) { renderResults(); return; }
      const selected = answers[q.id];
      formArea.innerHTML = `
        <div class="question-card">
          <div class="question-title">${q.title}</div>
          <div class="options">
            ${q.options.map(opt => {
              const active = selected === opt ? 'active' : '';
              return `<div class="opt ${active}" data-val="${opt}">${opt}</div>`;
            }).join('')}
          </div>
          <div class="nav">
            <button class="btn btn-secondary" id="prev" ${step === 0 ? 'disabled' : ''}>戻る</button>
            <button class="btn btn-primary" id="next">${step === questions.length - 1 ? '結果を見る' : '次へ'}</button>
          </div>
        </div>
      `;
      formArea.querySelectorAll('.opt').forEach(el => {
        el.addEventListener('click', () => {
          answers[q.id] = el.dataset.val;
          renderQuestion();
        });
      });
      formArea.querySelector('#prev').addEventListener('click', () => {
        step = Math.max(0, step - 1);
        renderQuestion();
      });
      formArea.querySelector('#next').addEventListener('click', () => {
        if (!answers[q.id]) return;
        step += 1;
        renderQuestion();
      });
    }

    startBtn.addEventListener('click', () => { step = 0; renderQuestion(); window.scrollTo({ top: 0, behavior: 'smooth' }); });
    skipBtn.addEventListener('click', () => { renderResults(); window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); });

    // initial render
    renderQuestion();
    renderResults();
  </script>
</body>
</html>
